# Here you can define all your data sets by using simple YAML syntax.
#
# Documentation for this file format can be found in "The Data Catalog"
# Link: https://kedro.readthedocs.io/en/stable/data/data_catalog.html

# RAW DATA

ga4_data_train:
  type: pandas.GBQQueryDataSet
  filepath: src/ga4_mlops/pipelines/data_preprocessing/sql/get_ga4_raw_data.sql
  project: gid-ml-framework
  layer: raw
  load_args:
    reauth: True
    configuration: {
      'query': {
        'parameterMode': 'NAMED',
        'queryParameters': [
            {
                'name': 'start_date',
                'parameterType': {'type': 'STRING'},
                'parameterValue': {'value': '20210126'}
            },
            {
                'name': 'end_date',
                'parameterType': {'type': 'STRING'},
                'parameterValue': {'value': '20210128'}
            },
            {
                'name': 'sample_size',
                'parameterType': {'type': 'INT64'},
                'parameterValue': {'value': 20}
            }
        ]
      }
    }

ga4_data_valid:
  type: pandas.GBQQueryDataSet
  filepath: src/ga4_mlops/pipelines/data_preprocessing/sql/get_ga4_raw_data.sql
  project: gid-ml-framework
  layer: raw
  load_args:
    reauth: True
    configuration: {
      'query': {
        'parameterMode': 'NAMED',
        'queryParameters': [
            {
                'name': 'start_date',
                'parameterType': {'type': 'STRING'},
                'parameterValue': {'value': '20210129'}
            },
            {
                'name': 'end_date',
                'parameterType': {'type': 'STRING'},
                'parameterValue': {'value': '20210129'}
            },
            {
                'name': 'sample_size',
                'parameterType': {'type': 'INT64'},
                'parameterValue': {'value': 10}
            }
        ]
      }
    }

ga4_data_test:
  type: pandas.GBQQueryDataSet
  filepath: src/ga4_mlops/pipelines/data_preprocessing/sql/get_ga4_raw_data.sql
  project: gid-ml-framework
  layer: raw
  load_args:
    reauth: True
    configuration: {
      'query': {
        'parameterMode': 'NAMED',
        'queryParameters': [
            {
                'name': 'start_date',
                'parameterType': {'type': 'STRING'},
                'parameterValue': {'value': '20210130'}
            },
            {
                'name': 'end_date',
                'parameterType': {'type': 'STRING'},
                'parameterValue': {'value': '20210130'}
            },
            {
                'name': 'sample_size',
                'parameterType': {'type': 'INT64'},
                'parameterValue': {'value': 10}
            }
        ]
      }
    }

ga4_data_predict:
  type: pandas.GBQQueryDataSet
  filepath: src/ga4_mlops/pipelines/data_preprocessing/sql/get_ga4_raw_data.sql
  project: gid-ml-framework
  layer: raw
  load_args:
    reauth: True
    configuration: {
      'query': {
        'parameterMode': 'NAMED',
        'queryParameters': [
            {
                'name': 'start_date',
                'parameterType': {'type': 'STRING'},
                'parameterValue': {'value': '20210131'}
            },
            {
                'name': 'end_date',
                'parameterType': {'type': 'STRING'},
                'parameterValue': {'value': '20210131'}
            },
            {
                'name': 'sample_size',
                'parameterType': {'type': 'INT64'},
                'parameterValue': {'value': 10}
            }
        ]
      }
    }

# PRIMARY DATA (AFTER: AFTER: SELECTION, AGGREGATION, SAMPLING)

df_train:
  type: pandas.CSVDataSet
  filepath: data/03_primary/df_train.csv
  layer: primary
  save_args:
    index: False

df_valid:
  type: pandas.CSVDataSet
  filepath: data/03_primary/df_valid.csv
  layer: primary
  save_args:
    index: False

df_test:
  type: pandas.CSVDataSet
  filepath: data/03_primary/df_test.csv
  layer: primary
  save_args:
    index: False

df_predict:
  type: pandas.CSVDataSet
  filepath: data/03_primary/df_predict.csv
  layer: primary
  save_args:
    index: False

# FEATURE DATA (AFTER: FEATURE ENGINEERING, IMPUTATION, ENCODING)

imputers_train:
    type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
    data_set:
        type: pickle.PickleDataSet
        filepath: output/imputers.pkl

imputers_predict:
    type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
    data_set:
        type: pickle.PickleDataSet
        filepath: output/imputers.pkl
    run_id: 6d6b4602820b4972bc53cffad4614f3b

feature_encoders_train:
    type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
    data_set:
        type: pickle.PickleDataSet
        filepath: output/feature_encoders.pkl

feature_encoders_predict:
    type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
    data_set:
        type: pickle.PickleDataSet
        filepath: output/feature_encoders.pkl
    run_id: 6d6b4602820b4972bc53cffad4614f3b

df_fe_train:
  type: pandas.CSVDataSet
  filepath: data/04_feature/df_fe_train.csv
  layer: feature
  save_args:
    index: False

df_fe_valid:
  type: pandas.CSVDataSet
  filepath: data/04_feature/df_fe_valid.csv
  layer: feature
  save_args:
    index: False

df_fe_test:
  type: pandas.CSVDataSet
  filepath: data/04_feature/df_fe_test.csv
  layer: feature
  save_args:
    index: False

df_fe_predict:
  type: pandas.CSVDataSet
  filepath: data/04_feature/df_fe_predict.csv
  layer: feature
  save_args:
    index: False

# MODEL INPUT DATA (AFTER: MANUAL FEATURE SELECTION)

abt_train:
  type: pandas.CSVDataSet
  filepath: data/05_model_input/abt_train.csv
  layer: model_input
  save_args:
    index: False

abt_valid:
  type: pandas.CSVDataSet
  filepath: data/05_model_input/abt_valid.csv
  layer: model_input
  save_args:
    index: False

abt_test:
  type: pandas.CSVDataSet
  filepath: data/05_model_input/abt_test.csv
  layer: model_input
  save_args:
    index: False

abt_predict:
  type: pandas.CSVDataSet
  filepath: data/05_model_input/abt_predict.csv
  layer: model_input
  save_args:
    index: False
